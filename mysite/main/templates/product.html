{% load static %}
<!DOCTYPE html>
<html lang="zxx">

<head>
 

<head>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- color of address bar in mobile browser -->
    <meta name="theme-color" content="#F5C332">
    <!-- favicon -->
    <link rel="shortcut icon" href="{% static 'img/ui/logo.ico' %}" type="image/x-icon">
    <!-- font awesome css -->
    <link rel="stylesheet" href="{% static 'css/plugins/font-awesome.min.css' %}">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="{% static 'css/plugins/bootstrap.min.css' %}">
    <!-- swiper css -->
    <link rel="stylesheet" href="{% static 'css/plugins/swiper.min.css' %}">
    <!-- datepicker css -->
    <link rel="stylesheet" href="{% static 'css/plugins/datepicker.css' %}">
    <!-- mapbox css -->
    <link href="{% static 'css/plugins/mapbox-style.css' %}" rel='stylesheet'>
    <!-- fancybox css -->
    <link rel="stylesheet" href="{% static 'css/plugins/fancybox.min.css' %}">
    <!-- starbelly css -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- page title -->
    <title>BMW Product</title>
</head>

</head>

<body>

  <!-- app wrapper -->
  <div class="sb-app">
    <!-- preloader -->
    <div class="sb-preloader">
      <div class="sb-preloader-bg"></div>
      <div class="sb-preloader-body">
        <div class="sb-loading">
          <div class="sb-percent"><span class="sb-preloader-number" data-count="101">00</span><span>%</span></div>
        </div>
        <div class="sb-loading-bar">
          <div class="sb-bar"></div>
        </div>
      </div>
    </div>
    <!-- preloader end -->
    <!-- click effect -->
    <div class="sb-click-effect"></div>
    <!-- loader -->
    <div class="sb-load"></div>
    <!-- top bar -->
    <div class="sb-top-bar-frame">
      <div class="sb-top-bar-bg"></div>
      <div class="container">
        <div class="sb-top-bar">
          <a href="home-1.html" class="sb-logo-frame">
            <!-- logo img -->
            <img src="{% static 'img/bmwlogo.jpg' %}" alt="bmw">          </a>
          <!-- menu -->
          <div class="sb-right-side">
            <nav id="sb-dynamic-menu" class="sb-menu-transition">
              <ul class="sb-navigation">
                <li class="sb-has-children">
                  <a href="/">Home</a>
                 
                </li>
                <li class="sb-has-children">
                  <a href="">categories</a>
                  <ul>
                    <li><a href="{%  url 'category' 'sport' %}">Sports</a></li>
                    <li><a href="{%  url 'category' 'SUV' %}">SUVs</a></li>
                    <li><a href="{%  url 'category' 'Luxury' %}">Luxury</a></li>
                    <li><a href="{%  url 'category' 'Electric' %}">Electric</a></li>
                    <li><a href="{% url 'cart_summary' %}"  >Cart</a></li>
                    <li><a href= "{% url 'checkout' %}" >Checkout</a></li>                  </ul>
                </li>
                <li>
                  <a href='about/'>about </a>
                </li>
                </li>
                
                
                <li>
                  <li class="sb-active sb-has-children">
                   
                    {% if user.is_authenticated %}
                    <a href="{% url 'account_logout' %}">logout</a>
                    {% else %}
                    <ul>
                     
                     
                    </ul>
                  </li>
                  <li class="sb-has-children">
                    <a href= "accounts/login/">login</a>
                    <a href="accounts/signup/">Signup</a>
                    {% endif %}
                    <ul>
                </li>
              </ul>
            </nav>
            <div class="sb-buttons-frame">
              <!-- button -->

                     <!-- card  --> 
                      <!-- cart number   -->



              <div class="sb-btn sb-btn-2 sb-btn-gray sb-btn-icon sb-m-0 sb-btn-cart">
                <span class="sb-icon">
                  <img src="" alt="icon">
                </span>
                <i class="sb-cart-number" <span class="badge bg-dark text-white ms-1 rounded-pill" id="cart_quantity">{{ cart|length }}  </i>
              </div>
              <!-- button end -->



              <!-- menu btn -->
              <div class="sb-menu-btn"><span></span></div>
           
            </div>
          </div>
        </div>
      </div>
      <!-- info bar -->
      
       



      <div class="sb-minicart">
        <div class="sb-minicart-content">
          <div class="sb-ib-title-frame sb-mb-30">
         <a>   <h4 >Your order.</h4></a> <i class="fas fa-arrow-down"></i>
          </div>
          <a href='#' class="sb-menu-item sb-menu-item-sm sb-mb-15">
            <div class="sb-cover-frame">
              <img src={{product.image.url}} alt="product">
            </div>
            <div class="sb-card-tp">
              <h4 class="sb-card-title">{{product.name}}</h4>
              <div class="sb-price"><sub>$</sub> {{product.price}}</div>
            </div>
          </a>
         

          
          
         
        </div>
        <div class="sb-minicart-footer">
          <!-- button -->





          <a href="{% url 'cart_summary'%}" class="sb-btn sb-btn-gray sb-btn-text">
            <span>View order</span>
          </a>
          <!-- button end -->
          <!-- button -->
          <a href="{% url 'checkout'%}" class="sb-btn sb-btn-text">
            <span>Checkout</span>
          </a>
          <!-- button end -->
        </div>
      </div>
      <!-- minicart end -->
    </div>
    <!-- top bar end -->

    <!-- dynamic content -->
    <div id="sb-dynamic-content" class="sb-transition-fade">

      <!-- banner -->
      <section class="sb-banner sb-banner-xs sb-banner-color">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <!-- main title -->
              <div class="sb-main-title-frame">
                <div class="sb-main-title">
                  <h1 class="sb-h2">Online shop</h1>
                  <ul class="sb-breadcrumbs">
                    <li><a href="home-1.html">Home</a></li>
                    <li><a href="shop-1.html">Shop</a></li>
                    <li><a href="#.">Product</a></li>
                  </ul>
                </div>
              </div>
              <!-- main title end -->
            </div>
          </div>
        </div>
      </section>
      <!-- banner end -->

      <!-- product -->
      {% if product.is_sales %}
      <section class="sb-p-90-0">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-6">
              <div class="sb-gallery-item sb-gallery-square sb-mb-90">
                <img src={{product.image.url}} alt="photo">
                <!-- button -->
                <a data-fancybox="menu" data-no-swup href="img/menu/4.jpg" class="sb-btn sb-btn-2 sb-btn-icon sb-btn-gray sb-zoom">
                  <span class="sb-icon">
                    <img src="img/ui/icons/zoom.svg" alt="icon">
                    <a href="shop-list-1.html" class="sb-cover-frame">
                      <img src="img/menu/2.jpg" alt="product">
                      <div class="sb-badge sb-vegan"><i class="fas fa-leaf"></i> {{product.sales_price}}</div>
                    </a>
                  </span>
                </a>
                
                <!-- button end -->
                 





              </div>

            </div>

            <div class="col-lg-6">
              <div class="sb-product-description sb-mb-90">
                <div class="sb-price-frame sb-mb-30">
                   <h3><h3>{{ product.name }}</h3>
                </h3>
                    <strike> <div class="sb-price"><sub>$</sub> {{product.price}}</div></strike>
                </div>
                <ul class="sb-stars sb-mb-25">
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
                  <li><span>{{product.star}}</span></li>
                </ul>
                <p class="sb-text sb-mb-30"><span>{{product.description}}</span>.</p>
                {% else %}
                <section class="sb-p-90-0">
                  <div class="container">
                    <div class="row align-items-center">
                      <div class="col-lg-6">
                        <div class="sb-gallery-item sb-gallery-square sb-mb-90">
                          <img src={{product.image.url}} alt="photo">
                          <!-- button -->
                          <a data-fancybox="menu" data-no-swup href="img/menu/4.jpg" class="sb-btn sb-btn-2 sb-btn-icon sb-btn-gray sb-zoom">
                            <span class="sb-icon">
                              <img src="img/ui/icons/zoom.svg" alt="icon">
                              
                            </span>
                          </a>
                          <!-- button end -->
                           
          
          
          
          
          
                        </div>
          
                      </div>
          
                      <div class="col-lg-6">
                        <div class="sb-product-description sb-mb-90">
                          <div class="sb-price-frame sb-mb-30">
                            <h3><h3>{{ product.name }}</h3>
                          </h3>
                            <div class="sb-price"><sub>$</sub> {{product.price}}</div>
                          </div>
                          <ul class="sb-stars sb-mb-25">
                            <li><i class="fas fa-star"></i></li>
                            <li><i class="fas fa-star"></i></li>
                            <li><i class="fas fa-star"></i></li>
                            <li><i class="fas fa-star"></i></li>
                            <li><i class="fas fa-star"></i></li>
                            <li><span>{{product.star}}</span></li>
                          </ul>
                          <p class="sb-text sb-mb-30"><span>{{product.description}}</span>.</p>

                          {% endif %}
                <div class="row">
                  <div class="col-lg-4">
                    <div class="sb-features-item sb-features-item-sm sb-mb-30">
                      <div class="sb-number">01</div>
                      <div class="sb-feature-text">
                        <h4 class="sb-mb-15">Add to the cart and place an order</h4>
                        <p class="sb-text sb-text-sm"></p>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="sb-features-item sb-features-item-sm sb-mb-30">
                      <div class="sb-number">02</div>
                      <div class="sb-feature-text">
                        <h4 class="sb-mb-15">Enter your phone number and address</h4>
                        <p class="sb-text sb-text-sm"></p>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="sb-features-item sb-features-item-sm sb-mb-30">
                      <div class="sb-number">03</div>
                      <div class="sb-feature-text">
                        <h4 class="sb-mb-15">Enjoy your favorite CAR at TRACK!</h4>
                        <p class="sb-text sb-text-sm"></p>
                      </div>
                    </div>
                  </div>
                </div>
               
                  <!-- button -->

                  
                        </div>
                        <div class="col-md-8">
                          <div class="card-body">
                            <center>
                            
                            
                            {% if product.is_sale %}
                            <div class="d-flex justify-content-center small text-warning mb-2">
                                    <div class="bi-star-fill"></div>
                                    &nbsp;&nbsp;Sale!&nbsp;&nbsp;
                                    <div class="bi-star-fill"></div>
                                    </div>
                    
                                    <!-- Product price-->
                                    <strike>
                                    ${{ product.price }}
                                    </strike>
                                    &nbsp;
                                    ${{ product.sale_price }}
                    
                    
                    
                            {% else %}
                                ${{ product.price }}
                                
                            {% endif %}
                    <div class="row justify-content-center">
                        <div class="col-md-2">Quantity:</div>
                                    <div class="col-md-2">
                                    <select class="form-select form-select-sm" id="qty-cart">
                                      <option value="1">1</option>
                                      <option value="2">2</option>
                                      <option value="3">3</option>
                                      <option value="4">4</option>
                                      <option value="5">5</option>
                                    </select>
                                    </div>
                                </div>
                               
                            <button type="button" value="{{ product.id }}" class="btn btn-secondary" id="add-cart">Add To Cart</button>
                    
                        </center>
                          </div>
                        </div>
                      </div>
                    </div>
                    </div>
                              
                    
                
                    
                    <script>
                    // Check if button pressed
                    $(document).on('click', '#add-cart', function(e){
                        e.preventDefault();
                        $.ajax({
                            type: 'POST',
                            url: '{% url 'cart_add' %}',
                            data: {
                        product_id: $('#add-cart').val(),
                        product_qty: $('#qty-cart option:selected').text(),
                        csrfmiddlewaretoken: '{{ csrf_token }}',
                        action: 'post'
                            },
                    
                            success: function(json){
                                //console.log(json)
                                document.getElementById("cart_quantity").textContent = json.qty
                                location.reload();
                            },
                    
                            error: function(xhr, errmsg, err){
                    
                            }
                    
                    
                        });
                    
                    
                    
                    })
                    
                    
                    
                    
                    </script>
                    
                  <!-- button end -->
                </div>
              </div>
            </div>
          </div>
          <!-- filter --><div class="container-sm" style="margin: 0 auto; max-width: 800px; padding: 20px;">

    <div class="sb-filter" style="display: flex; justify-content: center; margin-bottom: 20px;">
      <a href="#." data-filter=".sb-details-tab" class="sb-filter-link">Product details</a>
      <a href="#." data-filter=".sb-reviews-tab" class="sb-filter-link">Reviews</a>
  </div>
  
  <div class="sb-masonry-grid sb-tabs" style="display: flex; flex-direction: column; align-items: center;">
      <div class="sb-grid-sizer"></div>
      
      <div class="sb-grid-item sb-details-tab" style="position: absolute; width: 100%;">
          <div class="sb-tab">
              <p class="sb-text sb-mb-15">{{product.description}}</p>
          </div>
      </div>

      <div class="sb-grid-item sb-reviews-tab" style="position: absolute; width: 100%;">
          <div class="sb-tab">
              <div class="row" style="width: 100%;">
                  <div class="col-lg-6" style="text-align: center;">

                      <h2>User Reviews</h2>
                      <div id="review-container" style="margin-bottom: 20px;">
                          <!-- Existing review cards will be here -->
                      </div>

                      <!-- Comment form -->
                      <div class="sb-comment-form" style="border: 1px solid #ccc; border-radius: 8px; padding: 20px; background-color: #f9f9f9;">
                          <h4>Add a Review</h4>
                          <form id="comment-form">
                              <input type="text" id="username" placeholder="Your Name" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                              <textarea id="comment" placeholder="Your Comment" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;"></textarea>
                              <button type="submit" style="padding: 10px 15px; border: none; background-color: #007bff; color: white; border-radius: 4px; cursor: pointer;">Submit</button>
                          </form>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>

<style>
  .sb-review-card {
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .sb-review-header h4 {
      color: #333;
  }

  .sb-stars {
      list-style: none;
      padding: 0;
      margin: 5px 0;
  }

  .sb-stars li {
      display: inline;
      color: #ffcc00; /* Star color */
  }

  .sb-author-frame {
      display: flex;
      align-items: center;
      margin-top: 10px;
  }

  .sb-avatar-frame img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
  }
</style>

<script>
  document.getElementById('comment-form').addEventListener('submit', function(event) {
      event.preventDefault();

      const username = document.getElementById('username').value;
      const comment = document.getElementById('comment').value;

      const reviewContainer = document.getElementById('review-container');

      // Create a new review element
      const newReview = document.createElement('div');
      newReview.classList.add('sb-review-card');

      newReview.innerHTML = `
          <div class="sb-review-header">
              <h4>${comment}</h4>
              <ul class="sb-stars">
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
                  <li><i class="fas fa-star"></i></li>
              </ul>
          </div>
          <p class="sb-text">${comment}</p>
          <div class="sb-author-frame">
              <div class="sb-avatar-frame">
                  <img src="img/faces/default.jpg" alt="Guest">
              </div>
              <h4>${username}</h4>
          </div>
      `;

      // Append new review to the container
      reviewContainer.appendChild(newReview);

      // Clear form inputs
      document.getElementById('comment-form').reset();
  });
</script>

        
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
      <!-- product end -->

      <!-- short menu -->
     
</div>
<section class="sb-menu-section sb-p-90-60"> 
  <div class="container">
      <div class="row" style="display: flex; flex-wrap: wrap; justify-content: space-between;">
          {% for product in products %}
          <div class="col-lg-3" style="flex: 0 0 20%; margin-bottom: 20px;">
              <div class="sb-menu-item sb-mb-30" style="padding: 15px; border: 1px solid #e0e0e0; border-radius: 8px;">
                  <a href="product.html" class="sb-cover-frame">
                      <img src="{{ product.image.url }}" alt="product" style="max-width: 100%; height: auto;">
                  </a>
                  <div class="sb-card-tp" style="margin-top: 10px;">
                      <h4 class="sb-card-title" style="font-size: 18px; margin: 0;"><a href="product.html">{{ product.name }}</a></h4>
                      <div class="sb-price" style="font-size: 16px; font-weight: bold; margin-top: 5px;">
                          <sub>$</sub> {{ product.price }}
                      </div>
                  </div>
                  <div class="sb-description">
                      <p class="sb-text sb-mb-15">
                          <span>
                              {{ product.description|truncatechars:50 }}
                          </span>
                      </p>
                  </div>
                  <div class="sb-card-buttons-frame">
                      <a href="{% url 'product' product.id %}" class="sb-btn sb-btn-2 sb-btn-gray sb-btn-icon sb-m-0">
                          <span class="sb-icon">
                            <img src="{% static 'img/info.jpg' %}" alt="info" style="max-width: 100%; height: auto;">
                          </span>
                      </a>
                      <a href="{% url 'product' product.id %}" class="sb-btn sb-atc">
                          <span class="sb-icon">
                              <img src="{% static 'img/cart.png' %}" alt="icon">
                          </span>
                          <span class="sb-add-to-cart-text">more info  </span>
                          
                      </a>
                      <br>
                             

                      </a>

                  </div>
              </div>
          </div>
          {% endfor %}
      </div>
  </div>
</section>
      <!-- short menu end -->

   
          

          <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

      <!-- footer -->
      
        
      <!-- footer end -->

    </div>
    <!-- dynamic content end -->

  </div>
  <!-- app wrapper end -->

  <!-- jquery js -->
  {% load static %}

  <!-- jquery js -->
  <script src="{% static 'js/plugins/jquery.min.js' %}"></script>
  <!-- smooth scroll js -->
  <script src="{% static 'js/plugins/smooth-scroll.js' %}"></script>
  <!-- swup js -->
  <script src="{% static 'js/plugins/swup.min.js' %}"></script>
  <!-- swiper js -->
  <script src="{% static 'js/plugins/swiper.min.js' %}"></script>
  <!-- datepicker js -->
  <script src="{% static 'js/plugins/datepicker.js' %}"></script>
  <!-- isotope js -->
  <script src="{% static 'js/plugins/isotope.js' %}"></script>
  <!-- sticky -->
  <script src="{% static 'js/plugins/sticky.js' %}"></script>
  <!-- mapbox js -->
  <script src="{% static 'js/plugins/mapbox.min.js' %}"></script>
  <!-- fancybox js -->
  <script src="{% static 'js/plugins/fancybox.min.js' %}"></script>
  <!-- starbelly js -->
  <script src="{% static 'js/main.js' %}"></script>
  

</body>

</html>
